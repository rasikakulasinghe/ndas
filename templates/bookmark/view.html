{% extends 'src/base.html' %}
{% load static %}
{% block title %}Bookmark - View{% endblock %}
{% block main_content %}

</br>

<div class="container-sm">
  <div class="card">
    <div class="card-header bg-info d-flex justify-content-between align-items-center">
      <h3 class="card-title mb-0">
        <i class="fas fa-bookmark mr-2"></i>Bookmark Details
      </h3>
      <span class="badge badge-light">
        ID: {{bookmark.id}}
      </span>
    </div>

    <div class="card-body">
      <!-- Bookmark Information Section -->
      <div class="info-section mb-4">
        <h5 class="section-title text-primary border-bottom pb-2 mb-3">
          <i class="fas fa-info-circle mr-2"></i>Bookmark Information
        </h5>
        
        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">Title:</label>
          <div class="col-sm-9">
            <span class="form-control-plaintext">{{bookmark.title}}</span>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">Type:</label>
          <div class="col-sm-9">
            <span class="form-control-plaintext">
              <span class="badge badge-primary mr-2">{{bookmark.bookmark_type}}</span>
              {% if bookmark.bookmark_type  == 'Patient'%}
                <a href="{% url 'view-patient' bookmark.object_id %}" target="_blank" 
                   class="btn btn-sm btn-outline-primary" data-toggle="tooltip" data-placement="top" title="View Patient">
                  <i class="fas fa-user mr-1"></i>View Patient
                </a>
              {% elif bookmark.bookmark_type  == 'Video' and bookmark.object_id %}
                <a href="{% url 'video:view' bookmark.object_id %}" target="_blank" 
                   class="btn btn-sm btn-outline-primary" data-toggle="tooltip" data-placement="top" title="View Video">
                  <i class="fas fa-video mr-1"></i>View Video
                </a>
              {% elif bookmark.bookmark_type  == 'GMA' %}
                <a href="{% url 'assessment-view' bookmark.object_id %}" target="_blank" 
                   class="btn btn-sm btn-outline-primary" data-toggle="tooltip" data-placement="top" title="View General Movement Assessment">
                  <i class="fas fa-stethoscope mr-1"></i>View GMA
                </a>
              {% elif bookmark.bookmark_type  == 'HINE' %}
                <a href="{% url 'hine-assessment-view' bookmark.object_id %}" target="_blank" 
                   class="btn btn-sm btn-outline-primary" data-toggle="tooltip" data-placement="top" title="View HINE Assessment">
                  <i class="fas fa-brain mr-1"></i>View HINE
                </a>
              {% elif bookmark.bookmark_type  == 'Attachment' %}
                <a href="{% url 'attachment-view' bookmark.object_id %}" target="_blank" 
                   class="btn btn-sm btn-outline-primary" data-toggle="tooltip" data-placement="top" title="View Attachment">
                  <i class="fas fa-paperclip mr-1"></i>View Attachment
                </a>
              {% elif bookmark.bookmark_type  == 'DA' %}
                <a href="{% url 'da-assessment-view' bookmark.object_id %}" target="_blank" 
                   class="btn btn-sm btn-outline-primary" data-toggle="tooltip" data-placement="top" title="View Developmental Assessment">
                  <i class="fas fa-child mr-1"></i>View Dev. Assessment
                </a>
              {% elif bookmark.bookmark_type  == 'CDICR' %}
                <a href="{% url 'cdic-assessment-view' bookmark.object_id %}" target="_blank" 
                   class="btn btn-sm btn-outline-primary" data-toggle="tooltip" data-placement="top" title="View CDIC Record">
                  <i class="fas fa-clipboard-list mr-1"></i>View CDIC Record
                </a>
              {% endif %}
            </span>
          </div>
        </div>

        {% if bookmark.description %}
        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">Description:</label>
          <div class="col-sm-9">
            <div class="alert alert-light">
              <i class="fas fa-comment mr-2"></i>{{bookmark.description}}
            </div>
          </div>
        </div>
        {% endif %}
      </div>

      <!-- Ownership Information Section -->
      <div class="info-section mb-4">
        <h5 class="section-title text-success border-bottom pb-2 mb-3">
          <i class="fas fa-user-shield mr-2"></i>Ownership Information
        </h5>
        
        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">Created By:</label>
          <div class="col-sm-9">
            <span class="form-control-plaintext">
              <a href="{% url 'user-view-by-username' bookmark.owner.username %}" target="_blank" 
                 class="text-decoration-none" data-toggle="tooltip" data-placement="top" title="View user profile">
                <i class="fas fa-user mr-1"></i>{{bookmark.owner.username}}
              </a>
              <small class="text-muted ml-2">on {{bookmark.created_on|date:"F d, Y g:i A"}}</small>
            </span>
          </div>
        </div>

        {% if bookmark.last_edit_by %}
        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">Last Modified:</label>
          <div class="col-sm-9">
            <span class="form-control-plaintext">
              {{bookmark.last_edit_by.username}} 
              <small class="text-muted">on {{bookmark.last_edit_on|date:"F d, Y g:i A"}}</small>
            </span>
          </div>
        </div>
        {% endif %}
      </div>

      <!-- Action Buttons -->
      <div class="card-footer bg-light">
        <div class="row">
          <div class="col-md-6">
            <div class="btn-group-vertical btn-group-sm w-100" role="group">
              <a class="btn btn-outline-info mb-1" href="{% url 'bookmark-manager' %}">
                <i class="fas fa-list mr-2"></i>All Bookmarks
              </a>
            </div>
          </div>
          <div class="col-md-6">
            <div class="btn-group-vertical btn-group-sm w-100" role="group">
              <a class="btn btn-outline-success mb-1" href="{% url 'bookmark-edit' bookmark.id %}">
                <i class="fas fa-edit mr-2"></i>Edit Bookmark
              </a>
              <a class="btn btn-outline-danger mb-1" href="{% url 'bookmark-delete' bookmark.id %}" 
                 onclick="return confirm('Are you sure you want to delete this bookmark?')">
                <i class="fas fa-trash mr-2"></i>Delete Bookmark
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.info-section {
  background-color: #f8f9fa;
  padding: 1.5rem;
  border-radius: 0.5rem;
  margin-bottom: 1rem;
}

.section-title {
  color: #495057;
  font-weight: 600;
  margin-bottom: 1rem;
}

.form-control-plaintext {
  padding: 0.375rem 0;
  margin-bottom: 0;
  line-height: 1.5;
  background-color: transparent;
  border: solid transparent;
  border-width: 1px 0;
}

.btn-group-vertical .btn {
  border-radius: 0.25rem !important;
  margin-bottom: 0.25rem;
}

.card-footer {
  border-top: 1px solid #dee2e6;
  margin-top: 2rem;
  padding: 1.5rem;
}

.badge {
  font-size: 0.9em;
}

@media (max-width: 768px) {
  .info-section {
    padding: 1rem;
  }
  
  .col-sm-3 {
    margin-bottom: 0.5rem;
  }
  
  .btn-group-vertical {
    margin-bottom: 1rem;
  }
}
</style>

<script>
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
});
</script>

{% endblock main_content %}