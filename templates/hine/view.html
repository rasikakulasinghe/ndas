{% extends 'src/base.html' %}
{% load static %}
{% block title %}HINE Record - View{% endblock %}
{% block main_content %}

</br>

<div class="container-sm">
  <div class="card">
    <div class="card-header bg-info d-flex justify-content-between align-items-center">
      <h3 class="card-title mb-0">
        <i class="fas fa-brain mr-2"></i>HINE Assessment Record
      </h3>
      <span class="badge badge-light">
        ID: {{HINERecord.id}}
      </span>
    </div>

    <div class="card-body">
      <!-- Patient Information Section -->
      <div class="info-section mb-4">
        <h5 class="section-title text-primary border-bottom pb-2 mb-3">
          <i class="fas fa-user mr-2"></i>Patient Information
        </h5>
        
        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">Patient Name:</label>
          <div class="col-sm-9">
            <span class="form-control-plaintext">{{HINERecord.patient.baby_name}}</span>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">Current Age:</label>
          <div class="col-sm-9">
            <span class="form-control-plaintext">{{HINERecord.patient.getCurrentAge}}</span>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">BHT Number:</label>
          <div class="col-sm-9">
            <span class="form-control-plaintext">{{HINERecord.patient.bht}}</span>
          </div>
        </div>
      </div>

      <!-- Assessment Information Section -->
      <div class="info-section mb-4">
        <h5 class="section-title text-success border-bottom pb-2 mb-3">
          <i class="fas fa-clipboard-check mr-2"></i>Assessment Details
        </h5>
        
        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">Assessment Date:</label>
          <div class="col-sm-9">
            <span class="form-control-plaintext">
              {{HINERecord.date_of_assessment|date:"F d, Y g:i A"}}
            </span>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">Age at Assessment:</label>
          <div class="col-sm-9">
            <span class="form-control-plaintext">
              <span class="badge badge-info">{{HINERecord.getAssessmentAgeInMonths}}</span>
            </span>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">HINE Score:</label>
          <div class="col-sm-9">
            <span class="form-control-plaintext">
              <span class="badge badge-primary score-badge">{{HINERecord.score}}/78</span>
              <small class="text-muted ml-2">
                {% if HINERecord.score >= 60 %}
                  (Normal range)
                {% elif HINERecord.score >= 40 %}
                  (Moderate concern)
                {% else %}
                  (Significant concern)
                {% endif %}
              </small>
            </span>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">Assessment Done By:</label>
          <div class="col-sm-9">
            <span class="form-control-plaintext">{{HINERecord.assessment_done_by}}</span>
          </div>
        </div>

        {% if HINERecord.comment %}
        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">Comments:</label>
          <div class="col-sm-9">
            <div class="alert alert-light">
              <i class="fas fa-comment mr-2"></i>{{HINERecord.comment}}
            </div>
          </div>
        </div>
        {% endif %}
      </div>

      <!-- Record Information Section -->
      <div class="info-section mb-4">
        <h5 class="section-title text-secondary border-bottom pb-2 mb-3">
          <i class="fas fa-info-circle mr-2"></i>Record Information
        </h5>
        
        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">Created By:</label>
          <div class="col-sm-9">
            <span class="form-control-plaintext">
              {{HINERecord.added_by}} 
              <small class="text-muted">on {{HINERecord.added_on|date:"F d, Y g:i A"}}</small>
            </span>
          </div>
        </div>

        {% if HINERecord.last_edit_by %}
        <div class="form-group row">
          <label class="col-sm-3 col-form-label font-weight-bold">Last Modified:</label>
          <div class="col-sm-9">
            <span class="form-control-plaintext">
              {{HINERecord.last_edit_by}} 
              <small class="text-muted">on {{HINERecord.last_edit_on|date:"F d, Y g:i A"}}</small>
            </span>
          </div>
        </div>
        {% endif %}
      </div>

      <!-- Action Buttons -->
      <div class="card-footer bg-light">
        <div class="row">
          <div class="col-md-6">
            <div class="btn-group-vertical btn-group-sm w-100" role="group">
              <a class="btn btn-outline-primary mb-1" href="{% url 'view-patient' HINERecord.patient.id %}">
                <i class="fas fa-user mr-2"></i>View Patient Profile
              </a>
              <a class="btn btn-outline-info mb-1" href="{% url 'hine-assessment-manager-patient' HINERecord.patient.id %}">
                <i class="fas fa-list mr-2"></i>All HINE Records
              </a>
            </div>
          </div>
          <div class="col-md-6">
            <div class="btn-group-vertical btn-group-sm w-100" role="group">
              <a class="btn btn-outline-success mb-1" href="{% url 'hine-assessment-edit' HINERecord.id %}">
                <i class="fas fa-edit mr-2"></i>Edit Record
              </a>
              {% if bookmark %}
                <a class="btn btn-outline-warning mb-1" href="{% url 'bookmark-view' bookmark.id %}">
                  <i class="fas fa-bookmark mr-2"></i>View Bookmark
                </a>
              {% else %}
                <a class="btn btn-outline-secondary mb-1" href="{% url 'bookmark-add' HINERecord.id 'HINE' %}">
                  <i class="fas fa-bookmark-o mr-2"></i>Add Bookmark
                </a>
              {% endif %}
              <a class="btn btn-outline-danger mb-1" href="{% url 'hine-assessment-delete_start' HINERecord.id %}" 
                 onclick="return confirm('Are you sure you want to delete this HINE record?')">
                <i class="fas fa-trash mr-2"></i>Delete Record
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.info-section {
  background-color: #f8f9fa;
  padding: 1.5rem;
  border-radius: 0.5rem;
  margin-bottom: 1rem;
}

.section-title {
  color: #495057;
  font-weight: 600;
  margin-bottom: 1rem;
}

.score-badge {
  font-size: 1.1em;
  padding: 0.5rem 1rem;
}

.form-control-plaintext {
  padding: 0.375rem 0;
  margin-bottom: 0;
  line-height: 1.5;
  background-color: transparent;
  border: solid transparent;
  border-width: 1px 0;
}

.btn-group-vertical .btn {
  border-radius: 0.25rem !important;
  margin-bottom: 0.25rem;
}

.card-footer {
  border-top: 1px solid #dee2e6;
  margin-top: 2rem;
  padding: 1.5rem;
}

@media (max-width: 768px) {
  .info-section {
    padding: 1rem;
  }
  
  .col-sm-3 {
    margin-bottom: 0.5rem;
  }
  
  .btn-group-vertical {
    margin-bottom: 1rem;
  }
}
</style>

{% endblock main_content %}