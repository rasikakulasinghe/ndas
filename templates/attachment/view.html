{% extends 'src/base.html' %}
{% load static %}
{% block title %}Attachment - View{% endblock %}
{% block main_content %}

</br>
{% include 'src/form_error.html' %}

<div class="container">

<!-- Page header -->
<div class="card bg-info"><div class="card-header"><h3 class="card-title">Attachment</h3></div></div>

<div class="row">
  <div class="col-md-7">
    <div class="card card-body">

      {% if attachment.attachment_type == 'Video' %}
      <video
        id="videoPlayer"
        class="video-js"
        controls
        preload="auto"
        data-setup='{"fluid": true}'>
        <source src="{{attachment.attachment.url}}" type="video/mp4"></source>
        <source src="{{attachment.attachment.url}}" type="video/mov"></source>
        <p>Video Playback Not Supported<br/>Your browser does not support the video tag.</p>
      </video>
      {% elif attachment.attachment_type == 'PDF'%}
      <p>Open a PDF file in a another window...</br></br>
      <b>Click here :</b><a href="{{attachment.attachment.url}}" target="_blank"> <i class="far fa-file-pdf" style="color: #00328a;"></i> {{attachment.file}}</a></p>
      {% elif attachment.attachment_type == 'Image'%}
        <img src="{{attachment.attachment.url|default_if_none:"#" }}" class="img-thumbnail">
      {% endif %}

      </div> <!-- /.card body-->
  </div>

  <div class="col-md-5">

    <div id="accordion">
      <div class="card card-secondary">
      <div class="card-header">
      <h4 class="card-title w-100">
      <a class="d-block w-100" data-toggle="collapse" href="#collapseOne" aria-expanded="true">
        <i class="fas fa-eye" style="color: #ffffff;"></i> &nbsp; &nbsp; Attachment Details
      </a>
      </h4>
      </div>
      <div id="collapseOne" class="collapse show" data-parent="#accordion" style="">
      <div class="card-body">
        <div class="row align-items-center"><label class="col-form-label col-sm-4">Title : </label><div class="col-sm">{{attachment.title}}</div></div>
        <div class="row align-items-center"><label class="col-form-label col-sm-4">Type : </label><div class="col-sm">{{attachment.attachment_type}}</div></div>
        <div class="row align-items-center"><label class="col-form-label col-sm-4">Description : </label><div class="col-sm">{{attachment.description}}</div></div>
        <div class="row align-items-center"><label class="col-form-label col-sm-4">Uploaded By : </label><div class="col-sm">{{attachment.uploaded_by}}</div></div>
        <div class="row align-items-center"><label class="col-form-label col-sm-4">Uploaded On : </label><div class="col-sm">{{attachment.uploaded_on}}</div></div>
        
        {% if attachment.last_edit_by %}
        <div class="row align-items-center"><label class="col-form-label col-sm-4">Last Edited By : </label><div class="col-sm">{{attachment.last_edit_by}}</div></div>
        <div class="row align-items-center"><label class="col-form-label col-sm-4">Last Edited On : </label><div class="col-sm">{{attachment.last_edit_on}}</div></div>
        {% endif %}

        <hr>

        <a href="{% url 'attachment-edit' attachment.id %}" class="btn btn-link"><i class="fas fa-pencil-alt"></i>  Update</a>
        <a href="{% url 'attachment-manager-patient' attachment.patient.id %}" class="btn btn-link"><i class="fas fa-eye"></i>  View All Attachments</a>
        <a href="{% url 'view-patient' attachment.patient.id %}" class="btn btn-link"><i class="fas fa-eye"></i>  View Patient</a>
        {% if attachment.uploaded_by and attachment.uploaded_by.username %}
        <a class="btn btn-link" href="{% url 'user-view-by-username' attachment.uploaded_by.username %}" type="button"><i class="fas fa-eye"></i> View Uploaded User</a>
        {% endif %}
        <a class="btn btn-link" href="{% url 'attachment-delete-confirm' attachment.id %}" type="button"><i class="far fa-trash-alt"></i>  Delete</a>

      </div>
      </div>
      </div>
      </div>

      <div class="card card-secondary">
      <div class="card-header">
      <h4 class="card-title w-100">
      <a class="d-block w-100 collapsed" data-toggle="collapse" href="#collapseTwo" aria-expanded="false">
        <i class="fas fa-eye" style="color: #ffffff;"></i> &nbsp; &nbsp; Patient Details
      </a>
      </h4>
      </div>
      <div id="collapseTwo" class="collapse" data-parent="#accordion" style="">
      <div class="card-body">
        <div class="row align-items-center"><label class="col-form-label col-sm-4">BHT : </label><div class="col-sm">{{patient.bht}}</div></div>
        <div class="row align-items-center"><label class="col-form-label col-sm-4">PHN : </label><div class="col-sm">{{patient.pin}}</div></div>
        <div class="row align-items-center"><label class="col-form-label col-sm-4">NNC No : </label><div class="col-sm">{{patient.nnc_no}}</div></div>
        <div class="row align-items-center"><label class="col-form-label col-sm-4">Name of Baby : </label><div class="col-sm">{{patient.baby_name}}</div></div>
        <div class="row align-items-center"><label class="col-form-label col-sm-4">Name of Mother : </label><div class="col-sm">{{patient.mother_name}}</div></div>
        <div class="row align-items-center"><label class="col-form-label col-sm-4">Gender : </label><div class="col-sm">{{patient.gender}}</div></div>
        <div class="row align-items-center"><label class="col-form-label col-sm-4">Age : </label><div class="col-sm">{{patient.mother_name}}</div></div>
        <hr>
        {% if bookmark %}
{% else %}
{% endif %}

        <a href="{% url 'view-patient' patient.id %}" class="btn btn-link"><i class="fas fa-eye"></i>  View patients' full details...</a></div>
      </div>
      </div>
      </div>
  </div>

</div> <!-- /.main container -->

{% endblock main_content %}