{% load static %}
<!DOCTYPE html>
<!--
NDAS - Optimized AdminLTE Template
Cleaned up template with consolidated scripts and improved performance
-->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>NDAS : {% block title %}{% endblock title %}</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Bootstrap 4 (required for AdminLTE 3.x) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  
  <!-- AdminLTE Theme style (Stable version 3.2) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">
  
  <!-- Select2 -->
  <link rel="stylesheet" href="{% static 'plugins/select2/css/select2.min.css' %}">
  
  <!-- NDAS Custom Theme (Consolidated CSS) -->
  <link rel="stylesheet" href="{% static 'dist/css/ndas-theme.css' %}">

  <!-- CSS for Video.js -->
  <link href="https://vjs.zencdn.net/8.0.4/video-js.css" rel="stylesheet" />

  {% block extra_css %}{% endblock extra_css %}
</head>
<body class="hold-transition sidebar-mini layout-fixed">

{% block mainbody %}

{% endblock mainbody %}

<!-- REQUIRED SCRIPTS -->

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Bootstrap 4 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- AdminLTE App -->
<script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>

<!-- Select2 -->
<script src="{% static 'plugins/select2/js/select2.min.js' %}"></script>

<!-- HTMX -->
<script src="{% static 'plugins/HTMX/htmx.min.js' %}"></script>

<!-- Chart.js (UMD version) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>

<!-- Video.js -->
<script src="https://vjs.zencdn.net/8.0.4/video.min.js"></script>

<!-- NDAS Custom Scripts -->
<script src="{% static 'js/app-utils.js' %}"></script>
<script src="{% static 'js/video-manager.js' %}"></script>

<!-- Legacy video scripts (for compatibility) -->
<script src="{% static 'js/rotate.js' %}" defer></script>
<script src="{% static 'js/zoomrotate.js' %}" defer></script>

{% block extra_js %}{% endblock extra_js %}

<!-- Application Initialization -->
<script>
// Application initialization when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    console.log('NDAS Application Loading...');
    
    // Initialize core components
    try {
        // NDAS utilities are auto-initialized by app-utils.js
        // Video manager is auto-initialized by video-manager.js
        console.log('NDAS Application Ready');
    } catch (error) {
        console.error('NDAS Application initialization error:', error);
    }
});

// Performance monitoring (development only)
{% if debug %}
window.addEventListener('load', function() {
    if (window.performance && window.performance.timing) {
        const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
        console.log('Page load time:', loadTime + 'ms');
    }
});
{% endif %}
</script>

</body>
</html>
