<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Fixes Test - NDAS</title>
    <link href="https://vjs.zencdn.net/8.0.4/video-js.css" rel="stylesheet">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        .success { color: green; }
        .error { color: red; }
        .warning { color: orange; }
    </style>
</head>
<body>
    <h1>JavaScript Fixes Test - NDAS Project</h1>
    
    <div class="test-section">
        <h2>1. Chart.js Test</h2>
        <canvas id="testChart" width="400" height="200"></canvas>
        <div id="chartStatus"></div>
    </div>
    
    <div class="test-section">
        <h2>2. Video.js Test</h2>
        <video id="videoPlayer" class="video-js" controls preload="auto" width="640" height="264">
            <source src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4" type="video/mp4">
            <p class="vjs-no-js">
                To view this video please enable JavaScript, and consider upgrading to a web browser that
                <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>.
            </p>
        </video>
        <div id="videoStatus"></div>
    </div>
    
    <div class="test-section">
        <h2>3. Console Test Results</h2>
        <div id="consoleResults">Check browser console for detailed results...</div>
    </div>

    <!-- Scripts in the exact same order as your updated template -->
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- Chart.js (single instance, not duplicate) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.2.1/chart.min.js" integrity="sha512-v3ygConQmvH0QehvQa6gSvTE2VdBZ6wkLOlmK7Mcy2mZ0ZF9saNbbk19QeaoTHdWIEiTlWmrwAL4hS8ElnGFbA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <!-- Video.js -->
    <script src="https://vjs.zencdn.net/8.0.4/video.min.js"></script>
    
    <!-- Test Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var chartStatus = document.getElementById('chartStatus');
            var videoStatus = document.getElementById('videoStatus');
            var consoleResults = document.getElementById('consoleResults');
            
            // Test 1: Chart.js
            try {
                if (typeof Chart === 'undefined') {
                    throw new Error('Chart.js not loaded');
                }
                
                const ctx = document.getElementById('testChart');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Fixed', 'Working', 'Success'],
                        datasets: [{
                            label: 'Test Results',
                            data: [100, 95, 98],
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            title: {
                                display: true,
                                text: '✅ Chart.js Working - No Import Errors!'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
                
                chartStatus.innerHTML = '<span class="success">✅ Chart.js: SUCCESS - No import statement errors</span>';
            } catch (error) {
                chartStatus.innerHTML = '<span class="error">❌ Chart.js: FAILED - ' + error.message + '</span>';
                console.error('Chart.js test failed:', error);
            }
            
            // Test 2: Video.js
            try {
                if (typeof videojs === 'undefined') {
                    throw new Error('Video.js not loaded');
                }
                
                var videoElement = document.getElementById('videoPlayer');
                if (!videoElement) {
                    throw new Error('Video element not found');
                }
                
                // Initialize player with error handling
                var player = videojs('videoPlayer', {
                    controlBar: {
                        'volumePanel': false,
                    },
                    fluid: true,
                    responsive: true
                });
                
                player.ready(function() {
                    videoStatus.innerHTML = '<span class="success">✅ Video.js: SUCCESS - Player initialized without errors</span>';
                    console.log('Video.js player ready');
                });
                
                player.on('error', function() {
                    var error = player.error();
                    videoStatus.innerHTML = '<span class="warning">⚠️ Video.js: Player initialized but video error - ' + (error ? error.message : 'Unknown error') + '</span>';
                });
                
                // Set initial status
                videoStatus.innerHTML = '<span class="success">✅ Video.js: Player created successfully</span>';
                
            } catch (error) {
                videoStatus.innerHTML = '<span class="error">❌ Video.js: FAILED - ' + error.message + '</span>';
                console.error('Video.js test failed:', error);
            }
            
            // Update console results
            setTimeout(function() {
                var results = [];
                
                if (typeof Chart !== 'undefined') {
                    results.push('✅ Chart.js: Loaded (Version: ' + Chart.version + ')');
                } else {
                    results.push('❌ Chart.js: Not loaded');
                }
                
                if (typeof videojs !== 'undefined') {
                    results.push('✅ Video.js: Loaded (Version: ' + videojs.VERSION + ')');
                } else {
                    results.push('❌ Video.js: Not loaded');
                }
                
                if (typeof $ !== 'undefined') {
                    results.push('✅ jQuery: Loaded (Version: ' + $.fn.jquery + ')');
                } else {
                    results.push('❌ jQuery: Not loaded');
                }
                
                consoleResults.innerHTML = results.join('<br>');
            }, 1000);
        });
    </script>

</body>
</html>
                }
            });
            console.log('✅ Chart.js loaded and working correctly');
        } catch (error) {
            console.error('❌ Chart.js error:', error);
        }
        
        // Test Video.js
        document.addEventListener('DOMContentLoaded', function() {
            var videoElement = document.getElementById('videoPlayer');
            if (videoElement && typeof videojs !== 'undefined') {
                try {
                    var player = videojs('videoPlayer');
                    player.ready(function() {
                        console.log('✅ Video.js loaded and working correctly');
                    });
                } catch (error) {
                    console.error('❌ Video.js error:', error);
                }
            } else {
                console.error('❌ Video element or videojs not found');
            }
        });
    </script>
</body>
</html>
